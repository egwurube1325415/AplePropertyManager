<!doctype html>
<html lang="en">
<head>
  <title>Contact Aple Property Manager | Refer or Place a Client</title>
<meta
  name="description"
  content="Contact Aple Property Manager to place a client, request availability, or ask about rapid re-housing and re-entry housing in Houston, TX."
/>
<link rel="canonical" href="https://www.aplepropertymanager.com/contact.html" />
<meta property="og:image" content="https://yourdomain.com/assets/apm-og-image.jpg">
<meta property="twitter:image" content="https://yourdomain.com/assets/apm-og-image.jpg">

  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <link rel="stylesheet" href="./style.css"/>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&family=Playfair+Display:wght@600&display=swap" rel="stylesheet">
</head>
    
<body>

  <!-- Top bar -->
  <header class="topstrip">
    <button class="iconbtn" aria-label="Open menu">
      <span class="bar"></span><span class="bar"></span><span class="bar"></span>
    </button>
    <div class="brand">
      <img src="./images/logo.png" alt="Aple logo" height="32">
      <span>Aple Property Manager</span>
    </div>
    <nav class="actions">
      <a class="signin" href="./index.html">Home</a>
    </nav>
  </header>

  <!-- Drawer -->
  <aside id="aple-drawer" class="drawer" role="dialog" aria-modal="true" aria-labelledby="drawer-title" aria-hidden="true">
    <div class="drawer-panel" role="navigation">
      <div class="drawer-head">
        <h2 id="drawer-title">Aple Property Manager</h2>
        <button id="drawer-close" class="iconbtn" aria-label="Close menu">✕</button>
      </div>
      <nav class="drawer-nav">
        <a href="./index.html" class="drawer-link">Home</a>
        <a href="./about.html" class="drawer-link">About</a>
        <a href="./services.html" class="drawer-link">Services</a>
        <a href="./contact.html" class="drawer-link">Contact</a>
        <a href="./referral.html" class="drawer-cta">Refer a Client</a>
      </nav>
      <div class="drawer-foot"><small>© <span id="drawerYear"></span> Aple Property Manager</small></div>
    </div>
    <div class="drawer-backdrop" tabindex="-1"></div>
  </aside>

  <!-- HERO with video background -->
  <section class="page-hero video-hero">
    <video class="hero-video" autoplay muted playsinline loop poster="./assets/apm4.jpg">
      <source src="./assets/scene3.mp4" type="video/mp4"/>
    </video>
    <div class="overlay" aria-hidden="true"></div>
    <div class="page-hero-inner">
      <h1 class="title">Contact Us</h1>
      <p class="subtitle">We’ll respond within 1–2 business days.</p>
    </div>
  </section>

  <main class="page-wrap">
    <section class="section grid-2">
      <!-- Direct contact -->
      <article class="card contact-card">
        <h2>Reach us directly</h2>
        <ul class="contact-list">
          <li>
            <span>Phone</span>
            <a href="tel:+14099980516">+1 (409) 998-0516</a>
          </li>
          <li>
            <span>Email</span>
            <a href="mailto:apmindependentgrouphomes@gmail.com">apmindependentgrouphomes@gmail.com</a>
          </li>
          <li>
            <span>City</span>
            <em>Houston, Texas</em>
          </li>
        </ul>
        
        <div class="contact-hours">
          <p>Best times:</p>
          <p><strong>Mon–Fri, 9am–4:30pm CST</strong></p>
          <p>After hours? Leave a message, we check daily.</p>
        </div>          
        
      </article>

      <!-- Message form -->
      <form id="contactForm">
        <div class="group">
          <label>Your name*</label>
          <input name="name" required>
          <div class="invalid-feedback">Please enter your name.</div>
        </div>
      
        <div class="group">
          <label>Email*</label>
          <input type="email" name="email" required>
          <div class="invalid-feedback">Please enter a valid email.</div>
        </div>
      
        <div class="group">
          <label>Phone (optional)</label>
          <input type="tel" name="phone">
        </div>

        <!-- NEW: preferred contact date -->
        <div class="group">
          <label>Preferred contact date (optional)</label>
          <input type="date" name="preferredDate">
        </div>

        <!-- NEW: preferred contact time -->
        <div class="group">
          <label>Preferred contact time (optional)</label>
          <input type="time" name="preferredTime">
        </div>
      
        <div class="group">
          <label>How can we help?*</label>
          <textarea name="message" rows="5" required></textarea>
          <div class="invalid-feedback">Please tell us how we can help.</div>
        </div>
      
        <!-- Honeypot (hidden from humans, bots may fill it) -->
        <input type="text" name="hp" autocomplete="off" tabindex="-1" style="display:none;">
      
        <button type="submit" class="aple-btn">Send</button>
        <p id="contactNote" class="aple-subtle" style="margin-top:10px;font-weight:700;"></p>
      </form>
    </section>

    <!-- Optional map/image band -->
    <section class="section">
      <div class="card">
        <h2>Service area</h2>
        <p>We operate across Greater Houston with a focus on quiet, well-kept neighborhoods.</p>
        <img src="./assets/houston.jpg" alt="Houston skyline" style="width:100%;border-radius:12px;object-fit:cover;max-height:360px;">
      </div>
    </section>
  </main>

  <footer class="alt-footer">
    <p><strong>Aple Property Manager LLC</strong> · Housing first, dignity always in Houston, Texas.</p>
    <p>Referrals: 
      <a href="mailto:apmindependentgrouphomes@gmail.com">apmindependentgrouphomes@gmail.com</a> 
      · <a href="tel:+14099980516">+1 (409) 998-0516</a>
    </p>
    <p>© <span id="year"></span> Aple Property Manager LLC. All rights reserved.</p>
  </footer>

  <!-- Existing drawer / slideshow JS -->
  <script src="./script.js"></script>

  <!-- Contact form -> Apps Script -->
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      // footer year
      document.getElementById("year").textContent = new Date().getFullYear();

      const form = document.getElementById("contactForm");
      const note = document.getElementById("contactNote");

      // Same webhook as referral form
      const WEBHOOK = "https://script.google.com/macros/s/AKfycbzC0i_zrPMP3QgIaGr58G3mHo6NBMPjX0WcxqKLiwSGR5bnpmVFO_nouVOrvAnZa-fq_g/exec";

      form.addEventListener("submit", async (e) => {
        e.preventDefault();

        // basic validation
        const requiredEls = form.querySelectorAll("input[required], textarea[required]");
        let firstInvalid = null;

        form.querySelectorAll(".invalid-feedback").forEach(fb => fb.style.display = "none");
        form.querySelectorAll(".is-invalid").forEach(el => el.classList.remove("is-invalid"));

        const emailOk = v => /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test((v || "").trim());
        const validateField = (el) => {
          if (!el.hasAttribute("required")) return true;
          const v = (el.value || "").trim();
          if (!v) return false;
          if (el.type === "email") return emailOk(v);
          return true;
        };

        requiredEls.forEach(el => {
          const ok = validateField(el);
          const fb = el.closest(".group")?.querySelector(".invalid-feedback");
          if (!ok) {
            if (fb) fb.style.display = "block";
            el.classList.add("is-invalid");
            if (!firstInvalid) firstInvalid = el;
          }
        });

        if (firstInvalid) {
          firstInvalid.scrollIntoView({ behavior: "smooth", block: "center" });
          firstInvalid.focus({ preventScroll: true });
          return;
        }

        // build payload
        const body = new URLSearchParams();
        body.append("form", "contact");
        body.append("name", form.name.value.trim());
        body.append("email", form.email.value.trim());
        body.append("phone", form.phone.value.trim());
        body.append("preferredDate", form.preferredDate.value);     // NEW
        body.append("preferredTime", form.preferredTime.value);     // NEW
        body.append("message", form.message.value.trim());
        body.append("hp", form.hp.value.trim());

        const btn = form.querySelector('button[type="submit"]');
        const oldText = btn.textContent;
        btn.disabled = true;
        btn.textContent = "Sending…";

        try {
          await fetch(WEBHOOK, {
            method: "POST",
            mode: "no-cors",
            headers: { "Content-Type": "application/x-www-form-urlencoded" },
            body: body.toString()
          });

          note.textContent = "Thanks! Your message has been sent. We’ll get back to you soon.";
          form.reset();
        } catch (err) {
          console.error(err);
          note.textContent = "Sorry—couldn’t send your message. Please try again.";
        } finally {
          btn.disabled = false;
          btn.textContent = oldText;
        }
      });
    });
  </script>
</body>
</html>
